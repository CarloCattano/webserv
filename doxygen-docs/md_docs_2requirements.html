<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: requirements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_docs_2requirements.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">requirements</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>II.1 Requirements • Your program has to take a configuration file as argument, or use a default path. • You can’t execve another web server. • Your server must never block and the client can be bounced properly if necessary. • It must be non-blocking and use only 1 poll() (or equivalent) for all the I/O operations between the client and the server (listen included).</p>
<p>• poll() (or equivalent) must check read and write at the same time. • You must never do a read or a write operation without going through poll() (or equivalent).</p>
<p>• Checking the value of errno is strictly forbidden after a read or a write operation.</p>
<p>• You don’t need to use poll() (or equivalent) before reading your configuration file. Because you have to use non-blocking file descriptors, it is possible to use read/recv or write/send functions with no poll() (or equivalent), and your server wouldn’t be blocking. But it would consume more system resources. Thus, if you try to read/recv or write/send in any file descriptor without using poll() (or equivalent), your grade will be 0.</p>
<p>• You can use every macro and define like FD_SET, FD_CLR, FD_ISSET, FD_ZERO (un- derstanding what and how they do it is very useful).</p>
<p>• A request to your server should never hang forever.</p>
<p>• Your server must be compatible with the web browser of your choice. • We will consider that NGINX is HTTP 1.1 compliant and may be used to compare headers and answer behaviors. • Your HTTP response status codes must be accurate. • You server must have default error pages if none are provided. • You can’t use fork for something else than CGI (like PHP, or Python, and so forth). • You must be able to serve a fully static website. • Clients must be able to upload files. • You need at least GET, POST, and DELETE methods. • Stress tests your server. It must stay available at all cost. • Your server must be able to listen to multiple ports (see Configuration file). 6 Webserv This is when you finally understand why a URL starts with HTTP III.2 For MacOS only Since MacOS doesn’t implement write() the same way as other Unix OSes, you are allowed to use fcntl(). You must use file descriptors in non-blocking mode in order to get a behavior similar to the one of other Unix OSes. However, you are only allowed to use fcntl() with the following flags: F_SETFL, O_NONBLOCK and FD_CLOEXEC. Any other flag is forbidden. III.3 Configuration file You can get some inspiration from the ’server’ part of NGINX configuration file. In the configuration file, you should be able to: • Choose the port and host of each ’server’. • Setup the server_names or not. • The first server for a host:port will be the default for this host:port (that means it will answer to all the requests that don’t belong to an other server). • Setup default error pages. • Limit client body size. • Setup routes with one or multiple of the following rules/configuration (routes wont be using regexp): ◦ Define a list of accepted HTTP methods for the route. ◦ Define a HTTP redirection. ◦ Define a directory or a file from where the file should be searched (for example, if url /kapouet is rooted to /tmp/www, url /kapouet/pouic/toto/pouet is /tmp/www/pouic/toto/pouet). ◦ Turn on or off directory listing. 7 Webserv This is when you finally understand why a URL starts with HTTP ◦ Set a default file to answer if the request is a directory. ◦ Execute CGI based on certain file extension (for example .php). ◦ Make it work with POST and GET methods. ◦ Make the route able to accept uploaded files and configure where they should be saved. ∗ Do you wonder what a CGI is? ∗ Because you won’t call the CGI directly, use the full path as PATH_INFO. ∗ Just remember that, for chunked request, your server needs to unchunk it, the CGI will expect EOF as end of the body. ∗ Same things for the output of the CGI. If no content_length is returned from the CGI, EOF will mark the end of the returned data. ∗ Your program should call the CGI with the file requested as first argument. ∗ The CGI should be run in the correct directory for relative path file access. ∗ Your server should work with one CGI (php-CGI, Python, and so forth). You must provide some configuration files and default basic files to test and demon- strate every feature works during evaluation. If you’ve got a question about one behavior, you should compare your program behavior with NGINX’s. For example, check how does server_name work. We’ve shared with you a small tester. It’s not mandatory to pass it if everything works fine with your browser and tests, but it can help you hunt some bugs. The important thing is resilience. Your server should never die. Do not test with only one program. Write your tests with a more convenient language such as Python or Golang, and so forth. Even in C or C++ if you want </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
